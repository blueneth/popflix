<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>POPFlix Pagination + Modal</title>
  <style>
    .popup-overlay {
  display: none;
  position: fixed;
  z-index: 1000;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  justify-content: center;
  align-items: center;
}

.popup-content {
  position: relative;
  width: 80%;
  max-width: 900px;
  height: 500px;
  background: #000;
  border-radius: 10px;
  overflow: hidden;
}

.popup-content iframe {
  width: 100%;
  height: 100%;
  border: none;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 20px;
  font-size: 32px;
  color: white;
  cursor: pointer;
  z-index: 1001;
}
    .row { margin-bottom: 40px; }
    .list { display: flex; flex-wrap: wrap; gap: 20px; }
    .item { width: 150px; text-align: center; cursor: pointer; }
    .item img { width: 100%; border-radius: 10px; }
    .pagination { margin-top: 10px; }
    button { padding: 6px 12px; margin: 5px; }

    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      top: 10%;
      left: 20%;
      width: 60%;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #ccc;
      box-shadow: 0 5px 20px rgba(0,0,0,0.5);
    }
    .modal img {
      max-width: 200px;
      float: left;
      margin-right: 20px;
      border-radius: 10px;
    }
    .modal-content { overflow: hidden; }
    .modal .close {
      float: right;
      color: red;
      font-size: 28px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Movie Section -->
  <div class="row">
    <h2>Trending Movies</h2>
    <div class="list" id="movie-list"></div>
    <div class="pagination">
      <button onclick="prevPage('movie')">Previous</button>
      <span id="movie-page">Page 1</span>
      <button onclick="nextPage('movie')">Next</button>
    </div>
  </div>

  <!-- TV Show Section -->
  <div class="row">
    <h2>Trending TV Shows</h2>
    <div class="list" id="tv-list"></div>
    <div class="pagination">
      <button onclick="prevPage('tv')">Previous</button>
      <span id="tv-page">Page 1</span>
      <button onclick="nextPage('tv')">Next</button>
    </div>
  </div>

  <!-- Anime Section -->
  <div class="row">
    <h2>Trending Anime</h2>
    <div class="list" id="anime-list"></div>
    <div class="pagination">
      <button onclick="prevPage('anime')">Previous</button>
      <span id="anime-page">Page 1</span>
      <button onclick="nextPage('anime')">Next</button>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="movie-modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <div class="modal-content">
      <img id="modal-img" src="" alt="Poster" />
      <div>
        <h2 id="modal-title"></h2>
        <p id="modal-overview"></p>
      </div>
    </div>
  </div>

  <script>
    const API_KEY = "9207d96c1512b3cca9fd8206b4a4b662"; // ðŸ‘ˆ Replace with your TMDB API Key
    const state = {
      movie: { page: 1 },
      tv: { page: 1 },
      anime: { page: 1 }
    };

    function getEndpoint(type, page) {
      const base = `https://api.themoviedb.org/3`;
      if (type === "movie") return `${base}/movie/popular?api_key=${API_KEY}&language=en-US&page=${page}`;
      if (type === "tv") return `${base}/tv/popular?api_key=${API_KEY}&language=en-US&page=${page}`;
      if (type === "anime") return `${base}/discover/tv?api_key=${API_KEY}&with_genres=16&language=en-US&page=${page}`;
    }

    function loadCategory(type) {
      const page = state[type].page;
      fetch(getEndpoint(type, page))
        .then(res => {
          if (!res.ok) throw new Error("API Error");
          return res.json();
        })
        .then(data => {
          const list = document.getElementById(`${type}-list`);
          list.innerHTML = "";

          data.results.forEach(item => {
            const title = item.title || item.name;
            const imgSrc = item.poster_path
              ? `https://image.tmdb.org/t/p/w200${item.poster_path}`
              : "https://via.placeholder.com/150x225?text=No+Image";

            const card = document.createElement("div");
            card.className = "item";
            card.innerHTML = `<img src="${imgSrc}" alt="${title}" /><div>${title}</div>`;
            card.onclick = () => showModal(item);
            list.appendChild(card);
          });

          document.getElementById(`${type}-page`).textContent = `Page ${page}`;
        })
        .catch(err => {
          console.error(`${type.toUpperCase()} Load Error:`, err);
          document.getElementById(`${type}-list`).textContent = "Failed to load.";
        });
    }

    function nextPage(type) {
      state[type].page++;
      loadCategory(type);
    }

    function prevPage(type) {
      if (state[type].page > 1) {
        state[type].page--;
        loadCategory(type);
      }
    }

    function showModal(item) {
      document.getElementById("modal-title").textContent = item.title || item.name;
      document.getElementById("modal-img").src = item.poster_path
        ? `https://image.tmdb.org/t/p/w300${item.poster_path}`
        : "https://via.placeholder.com/200x300?text=No+Image";
      document.getElementById("modal-overview").textContent = item.overview || "No description available.";
      document.getElementById("movie-modal").style.display = "block";
    }

function showModal(item) {
  const title = item.title || item.name;
  const id = item.id;
  const type = item.media_type || (item.name ? "tv" : "movie");

  document.getElementById("modal-title").textContent = title;
  document.getElementById("modal-img").src = item.poster_path
    ? `https://image.tmdb.org/t/p/w300${item.poster_path}`
    : "https://via.placeholder.com/200x300?text=No+Image";
  document.getElementById("modal-overview").textContent = item.overview || "No description available.";

  // âœ… Embed a player using a 3rd-party source like vidsrc
  const iframe = document.getElementById("modal-iframe");
  iframe.src = `https://vidsrc.to/embed/${type}/${id}`;
  
  document.getElementById("movie-modal").style.display = "block";
}
    
    function closeModal() {
      document.getElementById("movie-modal").style.display = "none";
    }

    // Initial load
    ["movie", "tv", "anime"].forEach(loadCategory);
  </script>
  
  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()" style="color: red;">&times;</span>
      <div class="modal-body">
  <img id="modal-image" src="" alt="" />
  <div class="modal-text">
    <h2 id="modal-title"></h2>
    <div class="stars" id="modal-rating"></div>
    <p id="modal-description"></p>
  </div>
</div>
      
      <div class="server-selector">
        <label for="server">Change Server:</label>
        <select id="server" onchange="changeServer()">
          <option value="vidsrc.cc">Vidsrc.cc</option>
          <option value="vidsrc.me">Vidsrc.me</option>
          <option value="player.videasy.net">Player.Videasy.net</option>
        </select>
      </div>
      <iframe id="modal-video" width="100%" height="315" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  
</body>
</html>
